-- MySQL Script generated by MySQL Workbench
-- mar. 04 d√©c. 2018 17:00:38 CET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`CATEGORY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CATEGORY` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`GENRE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`GENRE` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`ROLE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ROLE` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`AUTHOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`AUTHOR` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`SERIES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SERIES` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `CATEGORY_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX (`CATEGORY_ID` ASC),
  CONSTRAINT ``
    FOREIGN KEY (`CATEGORY_ID`)
    REFERENCES `mydb`.`CATEGORY` (`ID`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`BOOK`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`BOOK` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `SERIES_ID` BIGINT(20) UNSIGNED NULL DEFAULT NULL,
  PRIMARY KEY (`ID`),
  INDEX (`SERIES_ID` ASC),
  CONSTRAINT ``
    FOREIGN KEY (`SERIES_ID`)
    REFERENCES `mydb`.`SERIES` (`ID`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`AUTHOR_BOOK`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`AUTHOR_BOOK` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `AUTHOR_ID` BIGINT(20) UNSIGNED NOT NULL,
  `BOOK_ID` BIGINT(20) UNSIGNED NOT NULL,
  `ROLE_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX (`AUTHOR_ID` ASC, `BOOK_ID` ASC),
  INDEX (`BOOK_ID` ASC),
  INDEX (`ROLE_ID` ASC),
  CONSTRAINT ``
    FOREIGN KEY (`AUTHOR_ID`)
    REFERENCES `mydb`.`AUTHOR` (`ID`)
    ON DELETE CASCADE
    ON UPDATE RESTRICT,
  CONSTRAINT ``
    FOREIGN KEY (`BOOK_ID`)
    REFERENCES `mydb`.`BOOK` (`ID`)
    ON DELETE CASCADE,
  CONSTRAINT ``
    FOREIGN KEY (`ROLE_ID`)
    REFERENCES `mydb`.`ROLE` (`ID`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`EDITION_TYPE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`EDITION_TYPE` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`EDITOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`EDITOR` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`COLLECTION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`COLLECTION` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `EDITOR_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX (`EDITOR_ID` ASC),
  CONSTRAINT ``
    FOREIGN KEY (`EDITOR_ID`)
    REFERENCES `mydb`.`EDITOR` (`ID`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`EDITION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`EDITION` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `BOOK_ID` BIGINT(20) UNSIGNED NOT NULL,
  `COLLECTION_ID` BIGINT(20) UNSIGNED NOT NULL,
  `EDITION_TYPE_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX (`BOOK_ID` ASC),
  INDEX (`COLLECTION_ID` ASC),
  INDEX (`EDITION_TYPE_ID` ASC),
  UNIQUE INDEX `COLLECTION_ID_UNIQUE` (`COLLECTION_ID` ASC),
  UNIQUE INDEX `EDITION_TYPE_ID_UNIQUE` (`EDITION_TYPE_ID` ASC),
  CONSTRAINT ``
    FOREIGN KEY (`BOOK_ID`)
    REFERENCES `mydb`.`BOOK` (`ID`)
    ON DELETE CASCADE
    ON UPDATE RESTRICT,
  CONSTRAINT ``
    FOREIGN KEY (`COLLECTION_ID`)
    REFERENCES `mydb`.`COLLECTION` (`ID`)
    ON DELETE CASCADE,
  CONSTRAINT ``
    FOREIGN KEY (`EDITION_TYPE_ID`)
    REFERENCES `mydb`.`EDITION_TYPE` (`ID`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `mydb`.`SERIES_GENRE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SERIES_GENRE` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `SERIES_ID` BIGINT(20) UNSIGNED NOT NULL,
  `GENRE_ID` BIGINT(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX (`SERIES_ID` ASC, `GENRE_ID` ASC),
  INDEX (`GENRE_ID` ASC),
  CONSTRAINT ``
    FOREIGN KEY (`SERIES_ID`)
    REFERENCES `mydb`.`SERIES` (`ID`)
    ON DELETE CASCADE
    ON UPDATE RESTRICT,
  CONSTRAINT ``
    FOREIGN KEY (`GENRE_ID`)
    REFERENCES `mydb`.`GENRE` (`ID`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
